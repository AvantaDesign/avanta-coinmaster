# 📖 Avanta Finance - User Manual

## Guía Completa para Usuarios

### 👋 Bienvenido a Avanta Finance

Avanta Finance es tu asistente financiero personal diseñado específicamente para personas físicas con actividad empresarial en México. Este manual te guiará paso a paso en el uso de todas las funciones del sistema.

---

## 📑 Tabla de Contenidos

1. [Introducción](#-introducción)
2. [Comenzando](#-comenzando)
3. [Panel Principal (Dashboard)](#-panel-principal-dashboard)
4. [Gestión de Transacciones](#-gestión-de-transacciones)
5. [Cálculos Fiscales](#-cálculos-fiscales)
6. [Gestión de Facturas](#-gestión-de-facturas)
7. [Importación de Datos](#-importación-de-datos)
8. [Preguntas Frecuentes](#-preguntas-frecuentes)
9. [Soporte](#-soporte)

---

## 🎯 Introducción

### ¿Qué es Avanta Finance?

Avanta Finance es un sistema de contabilidad personal que te ayuda a:
- 📊 **Controlar tus finanzas** - Registra todos tus ingresos y gastos
- 💰 **Calcular impuestos** - ISR e IVA automáticamente
- 📄 **Gestionar facturas** - Almacena y organiza tus CFDIs
- 📈 **Visualizar tendencias** - Gráficas de tus finanzas
- 🎯 **Tomar decisiones** - Con información clara y precisa

### ¿Para quién es?

Este sistema es ideal para:
- Profesionales independientes (freelancers)
- Pequeños negocios
- Personas con actividad empresarial
- Cualquiera que necesite control financiero

### Características Principales

- ✅ **100% Gratis** - Sin costo mensual
- ✅ **Seguro** - Tus datos están protegidos
- ✅ **Rápido** - Respuesta instantánea
- ✅ **Fácil de usar** - Interfaz intuitiva
- ✅ **Accesible** - Desde cualquier dispositivo

---

## 🚀 Comenzando

### Acceso al Sistema

1. Abre tu navegador web (Chrome, Firefox, Safari, Edge)
2. Visita la URL de tu instalación:
   - Producción: `https://avanta-finance.pages.dev`
   - O tu dominio personalizado: `https://tudominio.com`

### Primera Vista

Al entrar, verás el **Panel Principal** con:
- 💳 Tarjetas de saldo
- 📊 Resumen de ingresos/gastos
- 📈 Tendencias de los últimos meses
- 📋 Transacciones recientes

### Navegación

El menú superior tiene 4 secciones:

```
🏠 Inicio  |  💼 Transacciones  |  📊 Fiscal  |  📄 Facturas
```

Haz clic en cualquier sección para navegar.

---

## 🏠 Panel Principal (Dashboard)

### Vista General

El Dashboard es tu centro de control financiero.

#### 1. Tarjetas de Saldo

**Balance Total**
- Muestra tu saldo actual total
- Suma de todas tus cuentas
- Color verde: saldo positivo
- Color rojo: saldo negativo

**Ingresos del Mes**
- Total de ingresos del mes actual
- Color verde
- Icono: ↑

**Gastos del Mes**
- Total de gastos del mes actual
- Color rojo
- Icono: ↓

**Utilidad del Mes**
- Diferencia: Ingresos - Gastos
- Verde si es positivo
- Rojo si es negativo

#### 2. Gráfica de Tendencias

Visualiza tus finanzas de los últimos 6 meses:
- **Barra verde**: Ingresos del mes
- **Barra roja**: Gastos del mes
- Pasa el mouse sobre las barras para ver detalles

#### 3. Gastos por Categoría

Distribución de tus gastos:
- 🎯 **Personal**: Gastos personales
- 💼 **Avanta**: Gastos empresariales
- Muestra porcentaje y monto

#### 4. Transacciones Recientes

Lista de las últimas 5 transacciones:
- Fecha
- Descripción
- Monto
- Tipo (Ingreso/Gasto)
- Categoría

**Acciones rápidas:**
- Ver todas: Click en "Ver todas las transacciones"

---

## 💼 Gestión de Transacciones

### Ver Transacciones

1. Click en **💼 Transacciones** en el menú
2. Verás una tabla con todas tus transacciones

**Columnas de la tabla:**
- **Fecha**: Cuándo ocurrió
- **Descripción**: Qué fue
- **Monto**: Cuánto ($)
- **Tipo**: Ingreso o Gasto
- **Categoría**: Personal o Avanta
- **Cuenta**: Banco/tarjeta usada
- **Acciones**: Editar o Eliminar

### Agregar Nueva Transacción

#### Paso 1: Abrir el formulario
- Click en el botón **"+ Nueva Transacción"** (arriba de la tabla)

#### Paso 2: Llenar los datos

**Campos requeridos (obligatorios):**

1. **Fecha**
   - Formato: Día/Mes/Año
   - Click en el calendario
   - Selecciona la fecha
   - ⚠️ No puedes usar fechas futuras

2. **Descripción**
   - Qué compraste o recibiste
   - Ejemplo: "Laptop para trabajo"
   - Máximo 500 caracteres

3. **Monto**
   - Cantidad en pesos mexicanos
   - Solo números y punto decimal
   - Ejemplo: 1500.50
   - ⚠️ Máximo: $999,999,999.99

4. **Tipo**
   - **Ingreso**: Cuando recibes dinero
     - Ejemplos: Venta, Pago de cliente, Factura
   - **Gasto**: Cuando pagas algo
     - Ejemplos: Compra, Pago a proveedor, Renta

5. **Categoría**
   - **Personal**: Para uso personal
     - Ejemplo: Comida, Transporte personal
   - **Avanta (Empresarial)**: Para el negocio
     - Ejemplo: Equipo, Software, Servicios

6. **Cuenta**
   - Selecciona de dónde sale/entra el dinero
   - Opciones:
     - BBVA Cuenta
     - HSBC Tarjeta
     - Efectivo
     - Otras cuentas configuradas

**Campos opcionales:**

7. **¿Es deducible?**
   - ✅ Marca si es deducible de impuestos
   - Aplica solo para gastos empresariales
   - Aparecerá en cálculos fiscales

8. **Comprobante**
   - Click en "Seleccionar archivo"
   - Sube ticket, factura, recibo
   - Formatos: JPG, PNG, GIF, PDF, XML
   - Tamaño máximo: 10 MB

#### Paso 3: Guardar
- Click en **"Agregar Transacción"**
- Verás mensaje de confirmación
- La transacción aparece en la tabla

**Ejemplo completo:**
```
Fecha: 14/10/2025
Descripción: Servicio de diseño web para cliente
Monto: 15,000.00
Tipo: Ingreso
Categoría: Avanta
Cuenta: BBVA Cuenta
Deducible: No aplica (es ingreso)
Comprobante: factura_cliente.pdf
```

### Editar Transacción

1. Encuentra la transacción en la tabla
2. Click en el icono **✏️ Editar**
3. Modifica los campos que necesites
4. Click en **"Guardar Cambios"**

**Tips:**
- Puedes cambiar cualquier campo
- No puedes editar varias a la vez
- Los cambios son inmediatos

### Eliminar Transacción

1. Encuentra la transacción en la tabla
2. Click en el icono **🗑️ Eliminar**
3. Confirma la eliminación
4. La transacción se elimina permanentemente

**⚠️ Advertencia:**
- La eliminación es permanente
- No se puede deshacer
- Los cálculos fiscales se actualizan automáticamente

### Buscar y Filtrar

**Búsqueda rápida:**
- Usa la barra de búsqueda arriba de la tabla
- Escribe cualquier palabra de la descripción
- Los resultados se filtran automáticamente

**Filtros avanzados:**
1. **Por tipo:**
   - Muestra solo Ingresos
   - Muestra solo Gastos

2. **Por categoría:**
   - Solo Personal
   - Solo Empresarial

3. **Por fecha:**
   - Rango de fechas personalizado
   - Mes específico
   - Año específico

4. **Por cuenta:**
   - Transacciones de una cuenta específica

### Ordenar

Click en los encabezados de columna para ordenar:
- **Fecha**: Más reciente → Más antigua (o viceversa)
- **Monto**: Mayor → Menor (o viceversa)
- **Descripción**: A → Z (alfabético)

---

## 📊 Cálculos Fiscales

### Vista Fiscal

1. Click en **📊 Fiscal** en el menú
2. Selecciona el mes y año
3. Verás el resumen fiscal completo

### Entender los Cálculos

#### ISR (Impuesto Sobre la Renta)

**Fórmula simplificada:**
```
Utilidad = Ingresos - Gastos Deducibles
ISR = Utilidad × 20%
```

**Ejemplo:**
```
Ingresos del mes: $50,000
Gastos deducibles: $20,000
Utilidad: $30,000
ISR a pagar: $6,000 (20% de $30,000)
```

**¿Qué son gastos deducibles?**
- Gastos necesarios para tu negocio
- Marcados como "deducible" al crearlos
- Con comprobante fiscal (factura)
- Categoría: Avanta (empresarial)

#### IVA (Impuesto al Valor Agregado)

**Fórmula:**
```
IVA Cobrado = Ingresos × 16%
IVA Pagado = Gastos Deducibles × 16%
IVA a Pagar = IVA Cobrado - IVA Pagado
```

**Ejemplo:**
```
Ingresos: $50,000
IVA Cobrado: $8,000 (16%)

Gastos: $20,000
IVA Pagado: $3,200 (16%)

IVA a pagar: $4,800 ($8,000 - $3,200)
```

### Tarjetas de Resumen Fiscal

**1. ISR del Mes**
- Impuesto sobre la renta calculado
- Se paga al mes siguiente
- Plazo: Antes del día 17

**2. IVA del Mes**
- IVA a pagar calculado
- Se paga mensualmente
- Plazo: Antes del día 17

**3. Utilidad Neta**
- Lo que te queda después de impuestos
- Utilidad - ISR
- Tu ganancia real

**4. Fecha Límite de Pago**
- Día 17 del mes siguiente
- Ejemplo: Octubre 2025 → Pagar antes del 17 de noviembre

### Desglose Detallado

**Ingresos del Periodo:**
- Total de ingresos del mes
- Separado por categoría

**Gastos del Periodo:**
- Total de gastos del mes
- Solo deducibles en cálculo ISR
- Todos los gastos en cálculo IVA

**Gráfica de Tendencias:**
- ISR de los últimos 6 meses
- Útil para planear pagos futuros

### Tips Fiscales

✅ **Mejores prácticas:**
- Registra todas tus transacciones
- Marca gastos deducibles correctamente
- Sube comprobantes siempre
- Revisa el resumen cada mes
- Planea tus pagos con anticipación

⚠️ **Importante:**
- Estos son **cálculos aproximados**
- Úsalos como guía/referencia
- Para declaraciones oficiales, consulta con tu contador
- El SAT puede tener reglas específicas

---

## 📄 Gestión de Facturas

### Ver Facturas (CFDIs)

1. Click en **📄 Facturas** en el menú
2. Verás tabla con todas tus facturas

**Columnas:**
- **Folio**: Número de factura
- **UUID**: Identificador único SAT
- **RFC**: De quien emitió
- **Fecha**: Cuándo se emitió
- **Subtotal**: Sin IVA
- **IVA**: Impuesto
- **Total**: Monto final
- **Estado**: Activa/Cancelada

### Agregar Factura Manual

#### Paso 1: Click en "Nueva Factura"

#### Paso 2: Llenar datos

**Campos obligatorios:**

1. **Folio**
   - Número de factura
   - Ejemplo: A-1234

2. **UUID**
   - 36 caracteres únicos
   - Formato: XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
   - Ejemplo: 12345678-1234-1234-1234-123456789012
   - Lo encuentras en el XML de la factura

3. **RFC Emisor**
   - RFC de quien emite la factura
   - 12 o 13 caracteres
   - Ejemplo: XAXX010101000

4. **RFC Receptor**
   - Tu RFC
   - Ejemplo: GORM850101XY9

5. **Fecha**
   - Cuándo se emitió la factura
   - Usa el calendario

6. **Subtotal**
   - Monto sin IVA
   - Ejemplo: 1000.00

7. **IVA**
   - 16% del subtotal
   - Se calcula automáticamente
   - Ejemplo: 160.00

8. **Total**
   - Subtotal + IVA
   - Se calcula automáticamente
   - Ejemplo: 1160.00

**Campo opcional:**

9. **XML URL**
   - Si subiste el archivo XML a R2
   - Click en "Subir XML"
   - El sistema extrae los datos automáticamente

#### Paso 3: Guardar
- Click en "Agregar Factura"
- Verás confirmación
- Aparece en la lista

### Importar Factura desde XML

**Método más fácil:**

1. Click en "Importar CFDI"
2. Arrastra archivo XML o click para buscar
3. El sistema extrae automáticamente:
   - UUID
   - RFC Emisor
   - RFC Receptor
   - Fecha
   - Subtotal
   - IVA
   - Total
4. Verifica los datos
5. Click en "Importar"

**Formatos aceptados:**
- Archivos .xml
- CFDI versión 3.3 o 4.0
- Máximo 10 MB

### Descargar XML

1. Encuentra la factura en la tabla
2. Click en el icono **📥 Descargar**
3. Se descarga el archivo XML
4. Úsalo para tu contabilidad o declaraciones

### Ver Detalles

1. Click en cualquier factura
2. Se abre modal con información completa:
   - Todos los datos fiscales
   - Conceptos (si están en XML)
   - Impuestos desglosados
   - Timbrado

---

## 📥 Importación de Datos

### Importar Estado de Cuenta (CSV)

¿Tienes cientos de transacciones de tu banco? Impórtalas fácilmente.

#### Bancos Soportados

1. **BBVA**
   - Descarga estado de cuenta en CSV
   - Formato automáticamente reconocido

2. **Banco Azteca**
   - Exporta movimientos a CSV
   - Formato automáticamente reconocido

#### Proceso de Importación

**Paso 1: Obtén tu CSV del banco**
- Entra a tu banca en línea
- Busca "Exportar movimientos" o "Estado de cuenta"
- Descarga en formato CSV o Excel
- Si es Excel, guárdalo como CSV

**Paso 2: Prepara el archivo**
- Asegúrate que tenga estas columnas:
  - Fecha
  - Descripción o Concepto
  - Monto o Importe
  - Tipo (Cargo/Abono o similar)

**Paso 3: Importa**
1. Ve a 💼 Transacciones
2. Click en "Importar CSV"
3. Selecciona tu banco (BBVA o Azteca)
4. Arrastra el archivo CSV
5. Previsualiza las transacciones
6. Selecciona cuáles importar
7. Asigna categorías (Personal/Avanta)
8. Click en "Importar seleccionadas"

**Paso 4: Verifica**
- Revisa que se importaron correctamente
- Edita si es necesario
- Marca cuáles son deducibles

**Tips:**
- Puedes importar múltiples archivos
- Las transacciones duplicadas se detectan automáticamente
- Puedes editar después de importar

### Importar Facturas en Lote

**Desde correo electrónico:**
1. Guarda todos los XML en una carpeta
2. Importa uno por uno usando "Importar CFDI"
3. El sistema extrae datos automáticamente

**Con n8n (avanzado):**
- Configura workflow para importar automáticamente
- Las facturas que lleguen por correo se procesan solas
- Ver: `N8N_WORKFLOWS.md` para configuración

---

## ❓ Preguntas Frecuentes

### General

**P: ¿Es gratis para siempre?**
R: Sí, el sistema usa la capa gratuita de Cloudflare que es suficiente para uso personal/pequeño negocio.

**P: ¿Mis datos están seguros?**
R: Sí, están protegidos por Cloudflare con cifrado HTTPS y almacenados en tu base de datos D1 privada.

**P: ¿Puedo usarlo desde mi celular?**
R: Sí, el diseño es responsive y funciona en cualquier dispositivo.

**P: ¿Necesito instalar algo?**
R: No, solo necesitas un navegador web moderno.

### Transacciones

**P: ¿Cuántas transacciones puedo tener?**
R: La capa gratuita de D1 soporta hasta 5 GB (millones de transacciones).

**P: ¿Puedo importar transacciones viejas?**
R: Sí, usa la función de importar CSV.

**P: ¿Puedo editar una transacción después?**
R: Sí, siempre puedes editar o eliminar.

**P: ¿Cómo subo un comprobante?**
R: Al crear/editar transacción, usa el botón "Seleccionar archivo".

### Fiscal

**P: ¿Los cálculos son oficiales?**
R: Son aproximaciones para referencia. Siempre consulta con tu contador para declaraciones oficiales.

**P: ¿Qué es un gasto deducible?**
R: Gasto necesario para tu actividad empresarial, con factura, que puedes restar de tus ingresos para pagar menos ISR.

**P: ¿Por qué la tasa de ISR es 20%?**
R: Es una tasa simplificada promedio. Tu tasa real puede variar según tu régimen fiscal.

**P: ¿Incluye retenciones?**
R: No en la versión actual. Próximamente.

### Facturas

**P: ¿Puedo almacenar los XML aquí?**
R: Sí, se guardan en R2 (hasta 10 GB gratis).

**P: ¿Qué pasa si subo un XML inválido?**
R: El sistema lo detecta y te muestra un error descriptivo.

**P: ¿Puedo descargar todas mis facturas?**
R: Actualmente una por una. Función de descarga masiva próximamente.

### Técnicas

**P: ¿Qué navegadores soporta?**
R: Chrome, Firefox, Safari, Edge (versiones recientes).

**P: ¿Funciona sin internet?**
R: No, necesitas conexión para acceder a tus datos.

**P: ¿Puedo hacer respaldo de mis datos?**
R: Sí, contacta al administrador para exportar tu base de datos.

**P: ¿Hay límite de usuarios?**
R: En la versión actual es para un solo usuario. Multi-usuario viene en Fase 2.

---

## 🆘 Soporte

### Problemas Comunes

#### "No puedo agregar transacción"
**Posibles causas:**
- Fecha en formato incorrecto
- Monto demasiado grande
- Descripción vacía
- Campo requerido sin llenar

**Solución:**
- Verifica todos los campos obligatorios
- Usa el calendario para la fecha
- Revisa que el monto sea válido

#### "La página no carga"
**Posibles causas:**
- Conexión a internet
- Problemas con Cloudflare
- Actualizaciones en curso

**Solución:**
- Verifica tu conexión
- Refresca la página (F5)
- Espera 5 minutos y reintenta
- Limpia caché del navegador

#### "No veo mis transacciones"
**Posibles causas:**
- Filtros activos
- Base de datos vacía
- Error de conexión

**Solución:**
- Limpia todos los filtros
- Verifica que hayas agregado transacciones
- Refresca la página

#### "El archivo no se sube"
**Posibles causas:**
- Archivo muy grande (>10 MB)
- Formato no soportado
- Problema con R2

**Solución:**
- Verifica el tamaño (máx 10 MB)
- Usa formatos: JPG, PNG, PDF, XML
- Comprime imágenes grandes
- Reintenta después de 1 minuto

### Contactar Soporte

**GitHub Issues:**
- Abre un issue en: https://github.com/AvantaDesign/avanta-coinmaster/issues
- Describe el problema detalladamente
- Incluye capturas de pantalla si es posible
- Respuesta: 1-3 días hábiles

**Información Útil al Reportar:**
- ¿Qué estabas haciendo?
- ¿Qué esperabas que pasara?
- ¿Qué pasó realmente?
- Mensajes de error (si hay)
- Navegador y versión
- Capturas de pantalla

### Recursos Adicionales

**Documentación Técnica:**
- README.md - Información general
- API_DOCUMENTATION.md - Referencia de API
- DEPLOYMENT.md - Guía de despliegue

**Comunidad:**
- Foro de Cloudflare: https://community.cloudflare.com/
- Discusiones GitHub: https://github.com/AvantaDesign/avanta-coinmaster/discussions

---

## 🎓 Tips y Mejores Prácticas

### Para Mejores Resultados

1. **Registra diariamente**
   - No dejes acumular transacciones
   - 5 minutos al día es mejor que 2 horas al mes

2. **Usa descripciones claras**
   - Bueno: "Laptop Dell Inspiron para diseño"
   - Malo: "Computadora"

3. **Sube siempre el comprobante**
   - Facilita auditorías
   - Respaldo para deducibilidad
   - No ocupa mucho espacio

4. **Categoriza correctamente**
   - Personal vs Empresarial afecta tus impuestos
   - Cuando dudes, consulta con tu contador

5. **Revisa mensualmente**
   - Último día del mes revisa el resumen fiscal
   - Planea tus pagos de impuestos
   - Ajusta gastos si es necesario

6. **Respalda tus XMLs**
   - Sube todas tus facturas
   - Organízalas por mes
   - Facilita declaraciones anuales

### Atajos de Teclado

Cuando estés en una tabla:
- **↑/↓**: Navegar entre filas
- **Enter**: Editar transacción seleccionada
- **Del**: Eliminar transacción seleccionada
- **Esc**: Cerrar modales

En formularios:
- **Tab**: Siguiente campo
- **Shift+Tab**: Campo anterior
- **Enter**: Guardar (si estás en el último campo)

### Flujo de Trabajo Recomendado

**Semanal:**
1. Importa estado de cuenta bancario
2. Revisa y categoriza transacciones importadas
3. Marca gastos deducibles
4. Sube comprobantes faltantes

**Mensual:**
1. Revisa resumen fiscal
2. Verifica facturas del mes
3. Planea pago de impuestos
4. Genera reporte para tu contador (si tienes)

**Anual:**
1. Exporta todas tus transacciones
2. Descarga todas las facturas
3. Revisa totales anuales
4. Prepara declaración anual

---

## 📞 Información de Contacto

**Desarrollado por:**
Mateo Reyes González / Avanta Design

**Repositorio:**
https://github.com/AvantaDesign/avanta-coinmaster

**Documentación:**
- Manual de Usuario: USER_MANUAL.md (este archivo)
- Guía Técnica: README.md
- Guía de Despliegue: PRODUCTION_DEPLOYMENT_GUIDE.md

**Soporte:**
- GitHub Issues: https://github.com/AvantaDesign/avanta-coinmaster/issues
- Email: [Tu email de soporte]

---

## 📜 Términos y Condiciones

### Uso del Sistema

- Este sistema es para uso personal/empresarial
- Los cálculos son aproximados y referenciales
- No sustituye asesoría contable profesional
- Siempre consulta con tu contador para declaraciones oficiales

### Privacidad

- Tus datos son privados y seguros
- No se comparten con terceros
- Cloudflare actúa como proveedor de infraestructura
- Tú eres dueño de tus datos

### Responsabilidad

- El usuario es responsable de sus declaraciones fiscales
- Los cálculos son estimados, no oficiales
- Recomendamos verificar con contador certificado
- No nos hacemos responsables por multas o recargos del SAT

---

## 🔄 Actualizaciones

Este manual se actualiza con cada nueva versión del sistema.

**Versión actual:** 1.0.0
**Última actualización:** Octubre 2025

**Próximas características:**
- Autenticación de usuarios
- Reportes en PDF
- Dashboard de analítica avanzada
- Presupuestos y metas
- Alertas y recordatorios
- App móvil nativa

---

**¡Gracias por usar Avanta Finance!** 🎉

Si este sistema te ayuda a organizar mejor tus finanzas, considera:
- ⭐ Dar una estrella en GitHub
- 📢 Recomendar a otros profesionales
- 💬 Compartir tu feedback
- 🤝 Contribuir al proyecto

**¡Éxito en tu gestión financiera!** 💰✨
